{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-sm border-0 p-4" style="border-radius: 20px;">
                <h4 class="fw-bold mb-4 text-primary">
                    <i class="bi bi-plus-circle-fill me-2"></i>Lançar Nova Leitura
                </h4>
                <p class="text-muted">Plano: <strong>{{ plan.title }}</strong></p>
                <hr>

                <form method="post">
                    {% csrf_token %}
                    
                    <div class="row g-3">
                        <div class="col-6">
                            <label class="form-label fw-semibold">Semana</label>
                            {{ form.week_number }}
                        </div>
                        <div class="col-6">
                            <label class="form-label fw-semibold">Dia</label>
                            {{ form.day_number }}
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-semibold">Livro da Bíblia</label>
                            {{ form.book }}
                        </div>

                        <div class="col-6">
                            <label class="form-label fw-semibold">Do Capítulo</label>
                            {{ form.start_chapter }}
                        </div>
                        <div class="col-6">
                            <label class="form-label fw-semibold">Até o Capítulo</label>
                            {{ form.end_chapter }}
                        </div>

                        <div class="col-12">
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="toggleVerses">
                                <label class="form-check-label text-muted">
                                    Ler versículos específicos
                                </label>
                            </div>
                        </div>
                        
                        <div id="verseFields" class="row g-3 mt-1" style="display:none">
                            <div class="col-6">
                                <label class="form-label fw-semibold">Do versículo</label>
                                {{ form.start_verse }}
                            </div>
                            <div class="col-6">
                                <label class="form-label fw-semibold">Até o versículo</label>
                                {{ form.end_verse }}
                            </div>
                        </div>
                        
                        <script>
                            document.getElementById('toggleVerses').addEventListener('change', function () {
                                document.getElementById('verseFields').style.display =
                                    this.checked ? 'flex' : 'none';
                            });
                        </script>


                        <div class="col-12 mt-4">
                            <button type="submit" class="btn btn-primary w-100 py-2 rounded-pill fw-bold">
                                Salvar Meta de Leitura
                            </button>
                            <a href="{% url 'plan_detail' plan.id %}" class="btn btn-link w-100 text-muted mt-2">Cancelar</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}