{% extends "base.html" %}

{% block content %}
<div class="container my-4">

    <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
        <a href="{% url 'home' %}" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-arrow-left"></i> Voltar
        </a>
        {% if request.user.username == user.username %}
        <a href="#" class="btn btn-outline-primary btn-sm">
            <i class="bi bi-pencil-square"></i> Editar Perfil
        </a>
        {% endif %}
    </div>
    
    <div class="card p-4 mb-4 shadow-sm border-0 text-center text-lg-start profile-header">
        <div class="d-flex flex-column flex-lg-row align-items-center">
            
            <img class="rounded-circle border border-5 border-white me-lg-4 mb-3 mb-lg-0" 
                 src="https://pub-ba1a1273b7274c32ada11ba5a4254e40.r2.dev/archives/minecraft_bucket_20251102035651.png" 
                 alt="Foto de Perfil de {{ user.username }}" 
                 style="width: 150px; height: 150px; object-fit: cover;">
            
            <div>
                <h1 class="mb-0 display-5 fw-bold">{{ user.get_full_name|default:user.username }}</h1>
                <p class="text-muted lead">@{{ user.username }}</p>
            </div>
        </div>
        
        <div class="mt-3 mt-lg-4">
            <h5 class="fw-semibold">Bio</h5>
            <p class="text-secondary">{{ user.profile.bio|default:"Nenhuma biografia informada ainda." }}</p>
        </div>
    </div>
    
    <div class="row g-4">
        
        <div class="col-lg-6">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-primary text-white fw-bold">
                    <i class="bi bi-info-circle-fill me-2"></i> Detalhes da Conta
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Usuário Desde:</span>
                        {{ user.date_joined|date:"d/m/Y" }}
                    </li>
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Nome Completo:</span>
                        {{ user.get_full_name|default:"Não informado" }}
                    </li>
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Data de Nascimento:</span>
                        {{ user.profile.birth_date|default:"Não informado" }}
                    </li>
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Localização:</span>
                        {{ user.profile.location|default:"Não informado" }}
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-success text-white fw-bold">
                    <i class="bi bi-telephone-fill me-2"></i> Informações de Contato
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Email:</span>
                        <a href="mailto:{{ user.email }}" class="text-decoration-none">{{ user.email }}</a>
                    </li>
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Telefone:</span>
                        {{ user.profile.phone|default:"Não informado" }}
                    </li>
                    <li class="list-group-item">
                        <span class="fw-semibold d-block">Último Login:</span>
                        {{ user.last_login|date:"d/m/Y H:i"|default:"Nunca" }}
                    </li>
                    <li class="list-group-item text-muted small">
                        * O email e o telefone podem não ser públicos dependendo das configurações.
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <h2 class="mt-5 mb-3">Últimas Publicações de {{ user.username }}</h2>
    <p class="text-muted">Implementar um loop aqui para mostrar os posts do usuário.</p>
    
</div>

<style>
.profile-header {
    background-color: #f8f9fa; /* Fundo levemente cinza */
}
</style>
{% endblock %}