<li>
  <strong>{{ comment.user.username }}</strong>: {{ comment.text }}
  <br>
  <small>{{ comment.date|date:"d/m/Y H:i" }}</small>

  <!-- Botão para mostrar o formulário -->
  <button class="btn btn-sm btn-link" type="button" onclick="toggleReplyForm({{ comment.id }})">
    Responder
  </button>

  <!-- Formulário escondido inicialmente -->
  <div id="reply-form-{{ comment.id }}" style="display: none; margin-top: 5px;">
    <form method="post" action="{% url 'add_comment' post.id %}">
      {% csrf_token %}
      <input type="hidden" name="commentId" value="{{ comment.id }}">
      <textarea name="text" class="form-control mb-2" rows="2" placeholder="Digite sua resposta..." required></textarea>
      <button type="submit" class="btn btn-primary btn-sm">Enviar</button>
      <button type="button" class="btn btn-secondary btn-sm" onclick="toggleReplyForm({{ comment.id }})">Cancelar</button>
    </form>
  </div>

  {% if comment.replies.all %}
  <ul>
    {% for reply in comment.replies.all %}
      {% include "church_app/_comment.html" with comment=reply %}
    {% endfor %}
  </ul>
  {% endif %}
</li>

<script>
  function toggleReplyForm(id) {
    const form = document.getElementById(`reply-form-${id}`);
    if (form.style.display === "none") {
      form.style.display = "block";
    } else {
      form.style.display = "none";
    }
  }
</script>
